<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:th="http://www.thymeleaf.org">
<head>

    <meta name="_csrf" th:content="${_csrf.token}"/>
    <!-- default header name is X-CSRF-TOKEN -->
    <meta name="_csrf_header" th:content="${_csrf.headerName}"/>

    
    <link rel="stylesheet" th:href="@{/styles/select2.min.css}">
    <link rel="stylesheet" th:href="@{/styles/bootstrap.min.css}">
    <link rel="stylesheet" th:href="@{/styles/styles.css}">
    <title th:text="${header.apTitle}"></title>
</head>
<body>
<div th:insert="fragments/WorkRecordingHeader :: WorkRecordingHeader"></div>
<table id="action_plan_table" class="table table-striped table-bordered w-auto container filter">
    <div>
        <input type="text" size="50" placeholder="Поиск" class="dynamic-filter" onchange="filterChanged(this)" />
        <a onclick="selectAll()" class="btn btn-primary bordered">Выбрать все</a>
        <a onclick="clearSelection()" class="btn btn-primary bordered">Снять выделение</a>
        <a onclick="createWorkPlanRecordClick(this)" class="btn btn-primary bordered">Подтвердить выбранное</a>
    </div>
    
    <thead>
        <tr>
            <th th:text="${header.id}"></th>
            <th th:text="${header.pmNum}"></th>
            <th th:text="${header.type}"></th>
            <th th:text="${header.description}"></th>
            <th th:text="${header.dueDate}"></th>
            <th th:text="${header.equipment}"></th>
            <th class="letterID" th:text="${header.executor}"></th>
            <th class="letterID" th:text="${header.responsible}"></th>
            <th class="letterID" th:text="${header.owner}"></th>
            <th th:text="${header.priorityIconPath}"></th>
            <th th:text="${header.activityTypeIconPath}"></th>
            <th th:text="${header.instruction}"></th>
        </tr>
    </thead>
    <tbody>
        <tr th:each="row : ${action_plan_rows}">
            <td class="id" th:text="${row.id}"></td>
            <td th:text="${row.pmNum}"></td>
            <td th:text="${row.type}"></td>
            <td class="description" th:text="${row.description}"></td>
            <td class="date" th:text="${row.dueDate}"></td>
            <td class="equipment" th:text="${row.equipment}"></td>
            <td class="letterID owner-button"><div class="worker-id execution" th:status="${row.flagOtv}" th:text="${row.executor}"></div></td>
            <td class="letterID"><div class="worker-id" th:status="${row.flagOft}" th:text="${row.responsible}"></div></td>
            <td class="letterID"><div class="worker-id" th:status="${row.flagTm}" th:text="${row.owner}"></div></td>
            <td class="td-center">
                <img class="center" th:src="${row.priorityIconPath}" alt="">
            </td>
            <td class="td-center">
                <img class="center" th:src="${row.activityTypeIconPath}" alt="">
            </td>
            <td  class="td-center">
                <a class="instruction" onclick="openInstruction(this)" th:lnk="${row.instruction}" target="_blank">
                <img class="center" src="/images/document.png">
                </a>
            </td>
        </tr>
    </tbody>
</table>

<div th:insert="fragments/WorkRecordingHeader :: WorkRecordingFooter"></div>
<script type="text/javascript" th:src="@{/libs/work_recording/action_plan.js}"></script>
<script type="text/javascript" th:src="@{/libs/work_recording/dynamic-filter.js}"></script>
<script type="text/javascript" th:src="@{/libs/work_recording/select-row.js}"></script>
</body>
</html>
